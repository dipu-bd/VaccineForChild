<form id="loginForm" method="post" action="javascript:null;">
    <div class="form-group">
        <label class="control-label">Username:</label>
        <input type="text" class="form-control" name="uname" placeholder="Your username">
    </div>

    <div class="form-group">
        <label class="control-label">Password:</label>
        <input type="password" class="form-control" name="passwd" placeholder="Your password">
    </div>

    <div class="form-group">
        <label><input type="checkbox" name="remember" checked> Remember me</label> <br/>
        <!-- forgot pass method -->
        <a href='#' target="_self" onclick="return;//TODO">Forgot user name or password?</a>
    </div>

    <div class="modal-footer">
        <!-- form output -->
        <div class="text-center text-info well-sm" id="error-box"></div>
        <!-- submit buttons -->
        <input type="submit" class="btn btn-primary btn-block" value="Sign in"/>
    </div>
</form>

<!--[if (gt IE 8)|!(IE)]><!-->
<script>
    (function () {
        var form = $('#loginForm');
        var errBox = $('#loginForm #error-box');
        var submitButton = $('#loginForm:submit');
        form.validate({
            submitHandler: function () {
                $.post('/auth/login', form.serialize())
                        .done(function (result, status, jqXHR) {
                            if (result === 'OK') {
                                window.location.href = '/';
                            } else {
                                errBox.text(result);
                            }
                        })
                        .error(function (result, status) {
                            console.log(result);
                            errBox.text('Connection Failed');
                        })
                        .always(function () {
                            submitButton.attr('disabled', false);
                        });
            },
            errorPlacement: function (error, element) {
                errBox.html(error);
            },
            rules: {
                uname: {
                    required: true,
                    minlength: 3,
                    maxlength: 35
                },
                passwd: {
                    required: true,
                    minlength: 5,
                    maxlength: 25
                }
            },
            messages: {
                uname: {
                    required: "The username is required",
                    minlength: "Username should be at least 3 characters long",
                    maxlength: "Username should not have more than 35 characters"
                },
                passwd: {
                    required: "The password is required",
                    minlength: "Password should have at least 6 characters",
                    maxlength: "Password should not have more than 25 characters"
                }
            }
        });
    })();
</script>
<!--<![endif]-->